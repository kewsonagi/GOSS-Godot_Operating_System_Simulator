[gd_scene load_steps=7 format=3 uid="uid://cb6du2j8deuwl"]

[ext_resource type="Theme" uid="uid://xjn6s723t6oi" path="res://addons/proton_control_animation/examples/theme/pca_theme.tres" id="1_6hoxo"]
[ext_resource type="Script" uid="uid://b4hvmk8t0qkgu" path="res://addons/proton_control_animation/src/proton_control_animation.gd" id="2_mmri4"]
[ext_resource type="Script" uid="uid://p8liavl4kvv8" path="res://addons/proton_control_animation/src/proton_control_copy_animation.gd" id="4_aybf1"]
[ext_resource type="Script" uid="uid://bi4omyv2xson" path="res://addons/proton_control_animation/src/animations/scale.gd" id="5_5375j"]

[sub_resource type="Resource" id="Resource_mtifd"]
script = ExtResource("5_5375j")
from = 1
to = 2
to_absolute_scale = Vector2(1.25, 1.25)
easing = 1
default_duration = 0.25
metadata/_custom_type_script = "uid://bi4omyv2xson"

[sub_resource type="Resource" id="Resource_aybf1"]
script = ExtResource("5_5375j")
to = 1
to_absolute_scale = Vector2(1.25, 1.25)
easing = 1
default_duration = 0.25
metadata/_custom_type_script = "uid://bi4omyv2xson"

[node name="CopyExample" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("1_6hoxo")

[node name="HBoxContainer" type="HBoxContainer" parent="."]
custom_minimum_size = Vector2(700, 0)
layout_mode = 1
anchors_preset = -1
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -251.5
offset_top = -213.0
offset_right = 251.5
offset_bottom = 213.0
grow_horizontal = 2
grow_vertical = 2

[node name="Label" type="RichTextLabel" parent="HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 1.5
bbcode_enabled = true
text = "The [b]ProtonControlCopyAnimation[/b] node let you play the same animation on different controls.

In this example, hovering the first button scales it up, and moving the mouse away scales it back to its regular scale.

The Copy node below the animation defines additional targets (the other buttons) that should behave the same way."
autowrap_mode = 2
vertical_alignment = 1

[node name="PanelContainer" type="PanelContainer" parent="HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="VBoxContainer" type="VBoxContainer" parent="HBoxContainer/PanelContainer"]
layout_mode = 2

[node name="Button1" type="Button" parent="HBoxContainer/PanelContainer/VBoxContainer"]
layout_mode = 2
text = "Button"

[node name="Button2" type="Button" parent="HBoxContainer/PanelContainer/VBoxContainer"]
layout_mode = 2
text = "Button"
metadata/pca_metadata_updater = true
metadata/pca_original_position = Vector2(0, 0)
metadata/pca_original_rotation = 0.0
metadata/pca_original_scale = Vector2(1, 1)

[node name="Button3" type="Button" parent="HBoxContainer/PanelContainer/VBoxContainer"]
layout_mode = 2
text = "Button"
metadata/pca_metadata_updater = true
metadata/pca_original_position = Vector2(0, 0)
metadata/pca_original_rotation = 0.0
metadata/pca_original_scale = Vector2(1, 1)

[node name="Button4" type="Button" parent="HBoxContainer/PanelContainer/VBoxContainer"]
layout_mode = 2
text = "Button"
metadata/pca_metadata_updater = true
metadata/pca_original_position = Vector2(0, 0)
metadata/pca_original_rotation = 0.0
metadata/pca_original_scale = Vector2(1, 1)

[node name="Button5" type="Button" parent="HBoxContainer/PanelContainer/VBoxContainer"]
layout_mode = 2
text = "Button"

[node name="Button6" type="Button" parent="HBoxContainer/PanelContainer/VBoxContainer"]
layout_mode = 2
text = "Button"

[node name="ScaleButtonUpAnimation" type="Node" parent="HBoxContainer/PanelContainer/VBoxContainer" node_paths=PackedStringArray("target", "trigger_source")]
script = ExtResource("2_mmri4")
target = NodePath("../Button1")
animation = SubResource("Resource_mtifd")
trigger_source = NodePath("../Button1")
on_hover_start = true
metadata/_custom_type_script = "uid://b4hvmk8t0qkgu"

[node name="ProtonControlCopyAnimation" type="Node" parent="HBoxContainer/PanelContainer/VBoxContainer/ScaleButtonUpAnimation" node_paths=PackedStringArray("extra_targets")]
script = ExtResource("4_aybf1")
extra_targets = [NodePath("../../Button2"), NodePath("../../Button3"), NodePath("../../Button4"), NodePath("../../Button5"), NodePath("../../Button6")]
metadata/_custom_type_script = "uid://p8liavl4kvv8"

[node name="ScaleButtonDownAnimation" type="Node" parent="HBoxContainer/PanelContainer/VBoxContainer" node_paths=PackedStringArray("target", "trigger_source")]
script = ExtResource("2_mmri4")
target = NodePath("../Button1")
animation = SubResource("Resource_aybf1")
duration = 0.0
trigger_source = NodePath("../Button1")
on_hover_stop = true
metadata/_custom_type_script = "uid://b4hvmk8t0qkgu"

[node name="ProtonControlCopyAnimation" type="Node" parent="HBoxContainer/PanelContainer/VBoxContainer/ScaleButtonDownAnimation" node_paths=PackedStringArray("extra_targets")]
script = ExtResource("4_aybf1")
extra_targets = [NodePath("../../Button2"), NodePath("../../Button3"), NodePath("../../Button4"), NodePath("../../Button5"), NodePath("../../Button6")]
metadata/_custom_type_script = "uid://p8liavl4kvv8"
